import math


# Calculate the distance between two points
def distance(p1, p2):
    return math.sqrt((p2[0] - p1[0]) ** 2 + (p2[1] - p1[1]) ** 2)


# Given points and total distance traveled, find the position of the train
def train_position(points, dist_traveled):
    for i in range(len(points) - 1):
        segment_length = distance(points[i], points[i + 1])

        if dist_traveled < segment_length:
            # Train is on this segment
            ratio = dist_traveled / segment_length
            x = points[i][0] + ratio * (points[i + 1][0] - points[i][0])
            y = points[i][1] + ratio * (points[i + 1][1] - points[i][1])
            return int(x), int(y)

        # Reduce the traveled distance for the next iteration
        dist_traveled -= segment_length

    # If we get here, the train has completed the track
    return points[-1]


# Given points and total distance traveled, find the position of the train
def train_position_reverse(points, dist_traveled):
    for i in range(len(points) - 1, 0, -1):
        segment_length = distance(points[i], points[i - 1])

        if dist_traveled < segment_length:
            # Train is on this segment
            ratio = dist_traveled / segment_length
            x = points[i][0] - ratio * (points[i][0] - points[i - 1][0])
            y = points[i][1] - ratio * (points[i][1] - points[i - 1][1])
            return (int(x), int(y))

        # Reduce the traveled distance for the next iteration
        dist_traveled -= segment_length

    # If we get here, the train has completed the track
    return points[0]


# railways
railways = [
    # 0
    [(227, -1), (217, 88), (310, 136), (339, 193), (378, 198), (379, 209), (372, 263), (380, 291), (392, 315),
     (407, 342), (431, 358), (439, 374), (513, 449), (541, 522)],
    [(378, 198), (379, 209), (372, 263), (380, 291), (392, 315), (407, 342), (431, 358), (439, 374), (513, 449),
     (541, 522)],
    [(392, 315), (407, 342), (431, 358), (439, 374), (513, 449), (541, 522)],

    # 1
    [(531, -1), (541, 108), (534, 193), (525, 260), (522, 291), (516, 329), (501, 337), (482, 337), (476, 352),
     (482, 374), (482, 390), (472, 406), (513, 448), (507, 496), (522, 541)],
    [(522, 291), (516, 329), (501, 337), (482, 337), (476, 352),
     (482, 374), (482, 390), (472, 406), (513, 448), (507, 496), (522, 541)],

    # 2
    [(724, -1), (720, 11), (700, 120), (703, 136), (698, 175), (680, 175), (675, 195), (656, 309), (615, 374),
     (599, 488), (596, 488), (593, 502), (587, 516), (554, 527)],
    [(703, 136), (698, 175), (680, 175), (675, 195), (656, 309), (615, 374),
     (599, 488), (596, 488), (593, 502), (587, 516), (554, 527)],

    # 3
    [(1049, 412), (1007, 402), (981, 408), (827, 485), (774, 554), (764, 555), (655, 539), (646, 535), (591, 529),
     (506, 561)],
    [(981, 408), (827, 485), (774, 554), (764, 555), (655, 539), (646, 535), (591, 529),
     (506, 561)],

    # 4
    [(861, 0), (849, 7), (837, 12), (819, 27), (802, 30), (784, 46), (765, 61), (764, 71), (752, 106), (734, 134),
     (719, 156), (708, 179), (697, 178), (695, 192), (694, 209), (692, 222), (690, 233), (689, 247), (686, 261),
     (681, 276), (676, 289), (674, 300), (672, 313), (667, 329), (660, 340), (664, 348), (675, 357), (679, 362),
     (671, 373), (660, 379), (647, 386), (641, 392), (637, 404), (636, 420), (633, 433), (632, 446), (629, 463),
     (627, 477), (613, 477), (602, 475), (601, 489), (595, 498), (588, 515), (556, 529)],
     [(764, 71), (752, 106), (734, 134),
     (719, 156), (708, 179), (697, 178), (695, 192), (694, 209), (692, 222), (690, 233), (689, 247), (686, 261),
     (681, 276), (676, 289), (674, 300), (672, 313), (667, 329), (660, 340), (664, 348), (675, 357), (679, 362),
     (671, 373), (660, 379), (647, 386), (641, 392), (637, 404), (636, 420), (633, 433), (632, 446), (629, 463),
     (627, 477), (613, 477), (602, 475), (601, 489), (595, 498), (588, 515), (556, 529)],
    [(695, 192), (694, 209), (692, 222), (690, 233), (689, 247), (686, 261),
     (681, 276), (676, 289), (674, 300), (672, 313), (667, 329), (660, 340), (664, 348), (675, 357), (679, 362),
     (671, 373), (660, 379), (647, 386), (641, 392), (637, 404), (636, 420), (633, 433), (632, 446), (629, 463),
     (627, 477), (613, 477), (602, 475), (601, 489), (595, 498), (588, 515), (556, 529)],
    [(676, 289), (674, 300), (672, 313), (667, 329), (660, 340), (664, 348), (675, 357), (679, 362),
     (671, 373), (660, 379), (647, 386), (641, 392), (637, 404), (636, 420), (633, 433), (632, 446), (629, 463),
     (627, 477), (613, 477), (602, 475), (601, 489), (595, 498), (588, 515), (556, 529)],

    # 5
    [(1018, -1), (1011, 7), (1005, 16), (1004, 28), (1004, 38), (998, 55), (993, 69), (990, 86), (986, 93), (987, 117),
     (989, 130), (992, 142), (993, 161), (992, 180), (986, 189), (973, 199), (962, 208), (955, 218), (949, 227),
     (939, 240), (928, 249), (917, 263), (908, 270), (889, 276), (877, 292), (869, 305), (849, 317), (828, 328),
     (804, 328), (781, 329), (763, 329), (738, 329), (723, 329), (707, 329), (692, 340), (689, 355), (682, 370),
     (681, 383), (679, 393), (679, 405), (679, 420), (678, 437), (676, 449), (675, 463), (673, 476), (670, 492),
     (666, 508), (664, 522), (650, 533)],
    [(989, 130), (992, 142), (993, 161), (992, 180), (986, 189), (973, 199), (962, 208), (955, 218), (949, 227),
     (939, 240), (928, 249), (917, 263), (908, 270), (889, 276), (877, 292), (869, 305), (849, 317), (828, 328),
     (804, 328), (781, 329), (763, 329), (738, 329), (723, 329), (707, 329), (692, 340), (689, 355), (682, 370),
     (681, 383), (679, 393), (679, 405), (679, 420), (678, 437), (676, 449), (675, 463), (673, 476), (670, 492),
     (666, 508), (664, 522), (650, 533)],
    [(939, 240), (928, 249), (917, 263), (908, 270), (889, 276), (877, 292), (869, 305), (849, 317), (828, 328),
     (804, 328), (781, 329), (763, 329), (738, 329), (723, 329), (707, 329), (692, 340), (689, 355), (682, 370),
     (681, 383), (679, 393), (679, 405), (679, 420), (678, 437), (676, 449), (675, 463), (673, 476), (670, 492),
     (666, 508), (664, 522), (650, 533)],
    [(804, 328), (781, 329), (763, 329), (738, 329), (723, 329), (707, 329), (692, 340), (689, 355), (682, 370),
     (681, 383), (679, 393), (679, 405), (679, 420), (678, 437), (676, 449), (675, 463), (673, 476), (670, 492),
     (666, 508), (664, 522), (650, 533)],
    [(681, 383), (679, 393), (679, 405), (679, 420), (678, 437), (676, 449), (675, 463), (673, 476), (670, 492),
     (666, 508), (664, 522), (650, 533)],

    # 6
    [(604, 126), (602, 145), (599, 157), (599, 170), (598, 184), (591, 198), (589, 210), (589, 225), (586, 234),
     (580, 254), (579, 267), (579, 280), (577, 292), (574, 310), (573, 328), (570, 339), (567, 357), (564, 373),
     (563, 391), (563, 411), (560, 429), (546, 427), (543, 442), (542, 457), (540, 468), (539, 479), (543, 496)],
    [(580, 254), (579, 267), (579, 280), (577, 292), (574, 310), (573, 328), (570, 339), (567, 357), (564, 373),
     (563, 391), (563, 411), (560, 429), (546, 427), (543, 442), (542, 457), (540, 468), (539, 479), (543, 496)],
    [(563, 391), (563, 411), (560, 429), (546, 427), (543, 442), (542, 457), (540, 468), (539, 479), (543, 496)],

    # 7
    [(464, 108), (461, 120), (461, 131), (459, 141), (461, 157), (467, 166), (465, 182), (464, 194), (461, 207),
     (459, 218), (456, 235), (455, 252), (452, 266), (462, 275), (476, 277), (481, 285), (479, 302), (480, 318),
     (487, 327), (487, 336), (480, 346), (479, 361), (480, 375), (484, 386), (480, 396), (473, 408)],
    [(459, 218), (456, 235), (455, 252), (452, 266), (462, 275), (476, 277), (481, 285), (479, 302), (480, 318),
     (487, 327), (487, 336), (480, 346), (479, 361), (480, 375), (484, 386), (480, 396), (473, 408)],
    [(487, 327), (487, 336), (480, 346), (479, 361), (480, 375), (484, 386), (480, 396), (473, 408)],

    # 8
    [(1, 414), (13, 421), (20, 426), (30, 427), (39, 430), (49, 432), (60, 433), (74, 436), (91, 437), (107, 440),
     (116, 440), (129, 443), (141, 446), (154, 448), (167, 451), (181, 452), (197, 455), (209, 457), (223, 458),
     (238, 460), (257, 460), (268, 458), (277, 454), (287, 445), (294, 440), (312, 434), (322, 434), (337, 434),
     (353, 437), (368, 440), (381, 443), (394, 445), (411, 449), (421, 457), (431, 465), (437, 473), (443, 483),
     (451, 493), (458, 501), (468, 514), (481, 523), (486, 536), (493, 551)],
    [(116, 440), (129, 443), (141, 446), (154, 448), (167, 451), (181, 452), (197, 455), (209, 457), (223, 458),
     (238, 460), (257, 460), (268, 458), (277, 454), (287, 445), (294, 440), (312, 434), (322, 434), (337, 434),
     (353, 437), (368, 440), (381, 443), (394, 445), (411, 449), (421, 457), (431, 465), (437, 473), (443, 483),
     (451, 493), (458, 501), (468, 514), (481, 523), (486, 536), (493, 551)],
    [(238, 460), (257, 460), (268, 458), (277, 454), (287, 445), (294, 440), (312, 434), (322, 434), (337, 434),
     (353, 437), (368, 440), (381, 443), (394, 445), (411, 449), (421, 457), (431, 465), (437, 473), (443, 483),
     (451, 493), (458, 501), (468, 514), (481, 523), (486, 536), (493, 551)],
    [(353, 437), (368, 440), (381, 443), (394, 445), (411, 449), (421, 457), (431, 465), (437, 473), (443, 483),
     (451, 493), (458, 501), (468, 514), (481, 523), (486, 536), (493, 551)],

    # 9
    [(167, 269), (188, 272), (187, 290), (184, 306), (201, 309), (198, 327), (212, 330), (226, 334), (225, 347),
     (220, 361), (219, 375), (218, 390), (229, 399), (241, 405), (246, 420), (253, 430), (262, 442), (271, 455)],
    [(220, 361), (219, 375), (218, 390), (229, 399), (241, 405), (246, 420), (253, 430), (262, 442), (271, 455)],

    # 10
    [(190, 275), (201, 274), (215, 271), (231, 272), (244, 275), (262, 278), (272, 280), (287, 283), (306, 284),
     (321, 285), (333, 287), (333, 302), (331, 316), (330, 331), (334, 344), (341, 353), (352, 368), (366, 374),
     (384, 378), (396, 380), (406, 381), (418, 383), (430, 384), (443, 384)],
    [(321, 285), (333, 287), (333, 302), (331, 316), (330, 331), (334, 344), (341, 353), (352, 368), (366, 374),
     (384, 378), (396, 380), (406, 381), (418, 383), (430, 384), (443, 384)],

    # 11
    [(362, 2), (368, 15), (375, 29), (381, 44), (387, 60), (390, 73), (392, 86), (393, 103), (390, 120), (384, 129),
     (374, 141), (361, 147), (349, 156), (340, 172), (335, 193), (335, 212), (338, 226), (341, 240), (346, 253),
     (349, 265), (352, 284), (356, 300), (362, 315), (369, 322), (380, 337), (386, 353), (389, 365), (389, 381),
     (393, 396), (397, 414), (400, 426), (405, 437)],
    [(374, 141), (361, 147), (349, 156), (340, 172), (335, 193), (335, 212), (338, 226), (341, 240), (346, 253),
     (349, 265), (352, 284), (356, 300), (362, 315), (369, 322), (380, 337), (386, 353), (389, 365), (389, 381),
     (393, 396), (397, 414), (400, 426), (405, 437)],
    [(349, 265), (352, 284), (356, 300), (362, 315), (369, 322), (380, 337), (386, 353), (389, 365), (389, 381),
     (393, 396), (397, 414), (400, 426), (405, 437)],

    # 12
    [(288, 819), (275, 814), (259, 807), (246, 803), (234, 794), (226, 782), (220, 767), (213, 751), (207, 732),
     (201, 718), (195, 702), (194, 686), (194, 673), (195, 657), (197, 639), (200, 624), (204, 605), (204, 590),
     (209, 574), (213, 556), (219, 541), (223, 522), (232, 512), (241, 500), (248, 488), (256, 477), (265, 466),
     (272, 456)],
    [(201, 718), (195, 702), (194, 686), (194, 673), (195, 657), (197, 639), (200, 624), (204, 605), (204, 590),
     (209, 574), (213, 556), (219, 541), (223, 522), (232, 512), (241, 500), (248, 488), (256, 477), (265, 466),
     (272, 456)],
    [(209, 574), (213, 556), (219, 541), (223, 522), (232, 512), (241, 500), (248, 488), (256, 477), (265, 466),
     (272, 456)],

    # 13
    [(1, 818), (11, 817), (21, 811), (32, 799), (41, 790), (44, 771), (48, 758), (55, 749), (57, 730), (66, 713),
     (79, 709), (94, 710), (110, 713), (123, 715), (139, 718), (150, 716), (164, 712), (175, 707), (188, 700),
     (191, 687)],
    [(79, 709), (94, 710), (110, 713), (123, 715), (139, 718), (150, 716), (164, 712), (175, 707), (188, 700),
     (191, 687)],

    # 14
    [(-1, 428), (5, 441), (13, 454), (20, 463), (29, 474), (38, 487), (51, 505), (61, 518), (74, 531), (85, 541),
     (98, 553), (108, 568), (119, 577), (129, 587), (138, 597), (153, 608), (163, 618), (176, 628), (188, 639)],
    [(98, 553), (108, 568), (119, 577), (129, 587), (138, 597), (153, 608), (163, 618), (176, 628), (188, 639)],

    # 15
    [(1049, 584), (1039, 587), (1024, 587), (1008, 586), (995, 590), (980, 592), (964, 592), (948, 590), (937, 583),
     (925, 572), (911, 569), (896, 568), (884, 567), (872, 565), (858, 562), (840, 561), (824, 559), (807, 561),
     (793, 571), (782, 581), (769, 592), (754, 596), (740, 596), (729, 595), (715, 593), (701, 590), (684, 589),
     (670, 584), (656, 577), (641, 571), (626, 564), (614, 555), (602, 546), (588, 537), (576, 536)],
    [(925, 572), (911, 569), (896, 568), (884, 567), (872, 565), (858, 562), (840, 561), (824, 559), (807, 561),
     (793, 571), (782, 581), (769, 592), (754, 596), (740, 596), (729, 595), (715, 593), (701, 590), (684, 589),
     (670, 584), (656, 577), (641, 571), (626, 564), (614, 555), (602, 546), (588, 537), (576, 536)],
    [(793, 571), (782, 581), (769, 592), (754, 596), (740, 596), (729, 595), (715, 593), (701, 590), (684, 589),
     (670, 584), (656, 577), (641, 571), (626, 564), (614, 555), (602, 546), (588, 537), (576, 536)],

    # 16
    [(1048, 513), (1035, 511), (1020, 510), (1006, 505), (990, 504), (973, 501), (958, 498), (942, 496), (925, 493),
     (893, 489), (880, 486), (866, 486), (850, 483), (835, 482)],
    [(893, 489), (880, 486), (866, 486), (850,            483), (835, 482)],

    # 17
    [(1048, 868), (1033, 871), (1017, 871), (1002, 867), (989, 856), (983, 842), (978, 831), (971, 818), (964, 803),
     (961, 789), (956, 775), (948, 761), (939, 750), (927, 737), (915, 732), (900, 725), (887, 719), (875, 707),
     (869, 693), (863, 679), (853, 666), (838, 662), (822, 659), (809, 647), (800, 635), (793, 623), (790, 609),
     (781, 598), (768, 595)],
    [(961, 789), (956, 775), (948, 761), (939, 750), (927, 737), (915, 732), (900, 725), (887, 719), (875, 707),
     (869, 693), (863, 679), (853, 666), (838, 662), (822, 659), (809, 647), (800, 635), (793, 623), (790, 609),
     (781, 598), (768, 595)],
    [(869, 693), (863, 679), (853, 666), (838, 662), (822, 659), (809, 647), (800, 635), (793, 623), (790, 609),
     (781, 598), (768, 595)],

    # 18
    [(781, 1014), (785, 1000), (788, 985), (791, 969), (793, 955), (794, 940), (796, 926), (799, 910), (802, 894),
     (804, 881), (806, 869), (807, 854), (810, 839), (812, 826), (815, 809), (824, 800), (827, 780), (828, 768),
     (830, 749), (832, 737), (834, 721), (837, 704), (840, 690), (840, 679), (843, 666), (844, 654), (846, 638),
     (849, 620), (852, 606), (850, 591), (853, 578), (858, 558), (859, 542), (860, 524), (865, 513), (865, 501),
     (868, 489)],
    [(804, 881), (806, 869), (807, 854), (810, 839), (812, 826), (815, 809), (824, 800), (827, 780), (828, 768),
     (830, 749), (832, 737), (834, 721), (837, 704), (840, 690), (840, 679), (843, 666), (844, 654), (846, 638),
     (849, 620), (852, 606), (850, 591), (853, 578), (858, 558), (859, 542), (860, 524), (865, 513), (865, 501),
     (868, 489)],
    [(830, 749), (832, 737), (834, 721), (837, 704), (840, 690), (840, 679), (843, 666), (844, 654), (846, 638),
     (849, 620), (852, 606), (850, 591), (853, 578), (858, 558), (859, 542), (860, 524), (865, 513), (865, 501),
     (868, 489)],
    [(849, 620), (852, 606), (850, 591), (853, 578), (858, 558), (859, 542), (860, 524), (865, 513), (865, 501),
     (868, 489)],

    # 19
    [(1048, 974), (1035, 965), (1021, 957), (1006, 950), (993, 941), (978, 932), (962, 925), (949, 916), (936, 907),
     (921, 900), (909, 890), (894, 879), (883, 869), (871, 859), (860, 845), (850, 834), (837, 820), (827, 810),
     (816, 798), (807, 783), (797, 770), (785, 758), (778, 748), (768, 735), (759, 721), (747, 711), (734, 702),
     (716, 695), (703, 687), (691, 680), (678, 674), (667, 665), (669, 651), (669, 636), (672, 620), (675, 608),
     (675, 595)],
    [(921, 900), (909, 890), (894, 879), (883, 869), (871, 859), (860, 845), (850, 834), (837, 820), (827, 810),
     (816, 798), (807, 783), (797, 770), (785, 758), (778, 748), (768, 735), (759, 721), (747, 711), (734, 702),
     (716, 695), (703, 687), (691, 680), (678, 674), (667, 665), (669, 651), (669, 636), (672, 620), (675, 608),
     (675, 595)],
    [(816, 798), (807, 783), (797, 770), (785, 758), (778, 748), (768, 735), (759, 721), (747, 711), (734, 702),
     (716, 695), (703, 687), (691, 680), (678, 674), (667, 665), (669, 651), (669, 636), (672, 620), (675, 608),
     (675, 595)],
    [(716, 695), (703, 687), (691, 680), (678, 674), (667, 665), (669, 651), (669, 636), (672, 620), (675, 608),
     (675, 595)],

    # 20
    [(713, 1014), (716, 997), (719, 984), (722, 969), (722, 955), (717, 940), (712, 925), (706, 915), (700, 901),
     (691, 888), (684, 873), (678, 857), (673, 844), (673, 829), (675, 814), (679, 798), (679, 785), (675, 767),
     (667, 755), (657, 744), (656, 732), (657, 713), (658, 696), (661, 683), (664, 671)],
    [(691, 888), (684, 873), (678, 857), (673, 844), (673, 829), (675, 814), (679, 798), (679, 785), (675, 767),
     (667, 755), (657, 744), (656, 732), (657, 713), (658, 696), (661, 683), (664, 671)],

    # 21
    [(943, 963), (937, 953), (927, 946), (915, 944), (903, 943), (886, 940), (869, 937), (850, 934), (832, 931),
     (818, 928), (800, 925), (784, 922), (766, 919), (750, 918), (732, 915), (716, 913), (700, 909), (689, 907),
     (681, 896), (673, 884), (669, 870), (663, 859), (656, 845), (648, 831), (645, 819), (639, 801), (635, 785),
     (630, 773), (625, 758), (622, 742), (620, 727), (614, 713), (611, 696), (605, 680), (601, 664), (595, 648),
     (586, 633), (579, 623), (577, 608), (576, 593), (571, 577), (567, 564), (563, 547)],
    [(818, 928), (800, 925), (784, 922), (766, 919), (750, 918), (732, 915), (716, 913), (700, 909), (689, 907),
     (681, 896), (673, 884), (669, 870), (663, 859), (656, 845), (648, 831), (645, 819), (639, 801), (635, 785),
     (630, 773), (625, 758), (622, 742), (620, 727), (614, 713), (611, 696), (605, 680), (601, 664), (595, 648),
     (586, 633), (579, 623), (577, 608), (576, 593), (571, 577), (567, 564), (563, 547)],
    [(681, 896), (673, 884), (669, 870), (663, 859), (656, 845), (648, 831), (645, 819), (639, 801), (635, 785),
     (630, 773), (625, 758), (622, 742), (620, 727), (614, 713), (611, 696), (605, 680), (601, 664), (595, 648),
     (586, 633), (579, 623), (577, 608), (576, 593), (571, 577), (567, 564), (563, 547)],
    [(630, 773), (625, 758), (622, 742), (620, 727), (614, 713), (611, 696), (605, 680), (601, 664), (595, 648),
     (586, 633), (579, 623), (577, 608), (576, 593), (571, 577), (567, 564), (563, 547)],

    # 23
    [(625, 755), (614, 766), (602, 773), (594, 761), (583, 749), (571, 739), (561, 730), (548, 718), (540, 707),
     (533, 693), (526, 683), (520, 668), (515, 655), (512, 643), (507, 627), (502, 612), (502, 596), (512, 584),
     (510, 571), (505, 561)],
    [(533, 693), (526, 683), (520, 668), (515, 655), (512, 643), (507, 627), (502, 612), (502, 596), (512, 584),
     (510, 571), (505, 561)],
]

# Speed of the train (pixels per hour)
SPEED = 3


# To city
track_length_list = [sum(distance(railways[j][i], railways[j][i+1]) for i in range(len(railways[j])-1)) for j in range(len(railways))]
dist_traveled_list = [0 for i in range(len(railways))]


# To town
track_length_reverse_list = [sum(distance(railways[j][i], railways[j][i+1]) for i in range(len(railways[j])-1)) for j in range(len(railways))]
dist_traveled_reverse_list = [0 for i in range(len(railways))]


